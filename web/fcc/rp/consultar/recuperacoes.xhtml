<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet name="css/cssLayout.css"/>
        <h:outputStylesheet name="css/primeflex.min.css"/>

        <title>IFSP - SGRP</title>
    </h:head>

    <h:body>
        <ui:composition template="/fcc/home.xhtml">
            <ui:define name="content">
                <style>
                    /* reset on the showcase style*/
                    body .ui-panelgrid .ui-panelgrid-cell {
                        background-color: transparent;
                    }

                    /* example use of styles for your form */
                    .my-heading-row {
                        background-color: var(--surface-c);
                        font-weight: bold;
                        margin-top: 0.5em;
                    }
                    .ui-panelgrid.showcase-text-align-center .ui-grid-responsive .ui-panelgrid-cell {
                        text-align: center;
                    }

                    .customPanelGrid .ui-panelgrid-content {
                        align-items: center;
                    }
                </style>
                <div class="card">
                    <h:form id="form">
                        <p:growl id="messages" showDetail="true"/>

                        <p:breadCrumb>
                            <p:menuitem outcome="/fcc/home" value="Home"/>
                            <p:menuitem outcome="/fcc/rp/consultar/recuperacoes" value="Consultar Recuperação Paralela"/>
                        </p:breadCrumb>

                        <p:dataTable id="dt-rp" widgetVar="dtRPs" var="recuperacao" value="#{recuperacaoController.recuperacoesParalelas}"
                                     emptyMessage="Nenhuma recuperação encontrada" rowKey="#{recuperacao.id}" styleClass="recuperacao-table"
                                     style="margin-top: 10px" paginator="true" rows="10" paginatorPosition="bottom">

                            <f:facet name="header">
                                <div class="p-d-flex p-ai-center p-jc-between">
                                    <span>Recuperações Paralelas</span>
                                    <div>
                                        <p:commandButton id="toggler" type="button" value="Campos" icon="pi pi-align-justify"/>
                                        <p:columnToggler datasource="dt-rp" trigger="toggler">
                                            <p:ajax />
                                        </p:columnToggler>
                                    </div>
                                </div>
                            </f:facet>

                            <p:column headerText="Disciplina" sortBy="#{recuperacao.disciplina.nome}">
                                <h:outputText value="#{recuperacao.disciplina.nome}" />
                            </p:column>

                            <p:column headerText="Bimestre" sortBy="#{recuperacao.bimestre}">
                                <h:outputText value="#{recuperacao.bimestre}" />
                            </p:column>

                            <p:column headerText="Ano Letivo" sortBy="#{recuperacao.dataProposta}">
                                <h:outputText value="#{recuperacao.anoLetivo}" />
                            </p:column>

                            <p:column headerText="Total Alunos" sortBy="#{recuperacao.quantidadeAlunos}">
                                <h:outputText value="#{recuperacao.quantidadeAlunos}" />
                            </p:column>

                            <p:column headerText="Status" filterBy="#{recuperacao.status}" sortBy="#{recuperacao.status}">
                                <h:outputText value="#{recuperacao.status}" />
                            </p:column>

                            <p:column style="width:2rem">
                                <p:rowToggler/>
                            </p:column>

                            <p:column headerText="Ações" exportable="false">

                                <p:commandButton action="#{recuperacaoController.deferirRpFcc}"
                                                 styleClass="rounded-button"  icon="pi pi-check"
                                                 title="Deferir"
                                                 disabled="#{recuperacao.status != 'pendente' and recuperacao.status != 'Pendente'}"
                                                 >
                                    <f:setPropertyActionListener value="#{recuperacao}" target="#{recuperacaoController.recuperacaoParalela}"/>
                                    <p:confirm header="Deferir Recuperação Paralela" message="Deseja deferir a recuperacao paralela?" icon="pi pi-exclamation-triangle"/>
                                </p:commandButton>

                                <p:commandButton action="#{recuperacaoController.indeferirRp}"
                                                 styleClass="ui-button-danger rounded-button" icon="pi pi-times"
                                                 title="Indeferir"
                                                 style="margin-left: 7px;"
                                                 disabled="#{recuperacao.status != 'pendente' and recuperacao.status != 'Pendente'}"
                                                 >
                                    <f:setPropertyActionListener value="#{recuperacao}" target="#{recuperacaoController.recuperacaoParalela}"/>
                                    <p:confirm header="Indeferir Recuperação Paralela" message="Deseja indeferir a recuperacao paralela?" icon="pi pi-exclamation-triangle"/>
                                </p:commandButton>

                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" responsive="true" >
                                    <p:panelGrid columns="2" layout="flex" contentStyleClass="align-items-baseline ui-fluid">
                                        <p:outputLabel for="rp_obsercacoes">Observações: </p:outputLabel>
                                        <p:inputTextarea id="rp_obsercacoes" required="false"
                                                         value="#{recuperacao.observacoes}" 
                                                         autoResize="true"
                                                         />
                                    </p:panelGrid>
                                    <p:commandButton id ="submitBtn" value="Sim" type="button" styleClass="ui-confirmdialog-yes "/>
                                    <p:blockUI block="submitBtn" trigger="submitBtn"/>
                                    <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no ui-button-flat" />
                                </p:confirmDialog>
                            </p:column>

                            <p:rowExpansion>
                                <p:tabView>
                                <p:tab title="Dados">
                                        <p:panelGrid columns="4"
                                                     columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                                     layout="grid"
                                                     styleClass="ui-panelgrid-blank ui-fluid"
                                                     style="border:0px none; background-color:transparent;">
                                            
                                            <p:outputLabel>Curso:</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.disciplina.curso.descricao}"/>
                                            
                                            <p:outputLabel>Turma:</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.disciplina.curso.turmaCollection}"/>
                                        
                                            <p:outputLabel>Sigla:</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.disciplina.disciplinaPK.sigla}"/>
                                            
                                            <p:outputLabel>Disciplina</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.disciplina.nome}"/>
                                        
                                            <p:outputLabel>Bimestre</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.bimestre}"/>
                                            
                                            <p:outputLabel>Ano Letivo</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.anoLetivo}"/>
                                          
                                            <p:outputLabel>Docente(s):</p:outputLabel>
                                            <p:inputText disabled="true" value="#{recuperacao.servidorCollection}"/>
                                        </p:panelGrid>
                                        
                                        <p:panelGrid columns="2"
                                                     columnClasses="ui-grid-col-3,ui-grid-col-9"
                                                     layout="grid"
                                                     styleClass="ui-panelgrid-blank ui-fluid"
                                                     style="border:0px none; background-color:transparent;">

                                            <p:row id="my-row-id" styleClass="my-heading-row" style="font-weight: bold">
                                                Informações Adicionais
                                            </p:row>

                                            <p:outputLabel>Justificativa:</p:outputLabel>
                                            <p:inputTextarea disabled="true" rows="7" cols="40" value="#{recuperacao.justificativa}"/>

                                            <p:outputLabel>Objetivo Geral:</p:outputLabel>
                                            <p:inputTextarea disabled="true" rows="7" cols="40" value="#{recuperacao.objetivoGeral}"/>

                                            <p:outputLabel>Atividades propostas:</p:outputLabel>
                                            <p:inputTextarea disabled="true" rows="7" cols="40" value="#{recuperacao.atividadesPropostas}"/>

                                            <p:outputLabel>Procedimentos avaliativos:</p:outputLabel>
                                            <p:inputTextarea disabled="true" rows="7" cols="40" value="#{recuperacao.procedimentosAvaliativos}"/>

                                            <p:outputLabel>Observações:</p:outputLabel>
                                            <p:inputTextarea rows="7" cols="40" value="#{recuperacao.procedimentosAvaliativos}"/>
                                        </p:panelGrid>
                                    </p:tab>
                                    <p:tab title="Aulas">
                                        <p class="m-0">At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores
                                            et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga.
                                            Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus.
                                        </p>
                                    </p:tab>
                                </p:tabView>
                            </p:rowExpansion>
                        </p:dataTable>
                    </h:form>

                    <h:form id="dialogs">
                        <p:dialog header="Autorizar RP" showEffect="fade" modal="true"
                                  widgetVar="autRP" responsive="true">
                            <p:outputPanel id="aut-rp-content" class="ui-fluid">
                                <p:outputPanel rendered="#{not empty recuperacaoController.recuperacaoParalela}">

                                    <div class="p-field">
                                        <p:outputLabel >Disciplina</p:outputLabel>
                                        <p:outputLabel></p:outputLabel>
                                    </div>
                                </p:outputPanel>
                            </p:outputPanel>
                        </p:dialog>

                    </h:form>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
